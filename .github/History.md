# 更新履歴
## Ver:9.7 2025/04/17
 apngのサムネイル生成でffmpegが利用できない場合は、imagickのエラーで処理が止まるので、
 ffmpegが使えない場合は、静止画な通常のPNGを出力する様に修正。
 
## Ver:9.6 2022/03/17
 各種libの変更・調整。

## Ver:9.5 2022/02/22
 カテゴリな機能の追加。

## Ver:9.4 2022/02/03
 php8に対応。
 imagickを利用出来る場合、apngのサムネイル生成に対応。

## Ver:9.3 2020/01/17
 imagickの使用が出来る場合、GIFアニメなサムネイルが可能に。

## Ver:9.2 2019/12/01
 Access処理の分離、日本以外からの投稿規制の追加。連続投稿規制をCookieからデータファイル方式に変更。
 
## Ver:9.1 2019/06/24
 Tagキーワードの登録、#検索の機能の追加。
 動画をページ内で埋め込み再生も出来るように。（可能なサイトのみ）
 画像UP時、選択したファイルの容量を表示するJavaScripコードの追加。
 一部の設定変数名の変更。
 PC向けテンプレートファイルをhtml5記述ベース化。
 JavaScriptを外部ファイル化。
 CSSを外部ファイル化。

## Ver:9.0 2019/02/22
 編集モードの調整。
 レスの削除の権限の設定を追加。

## Ver:8.9 19/02/17
 編集時、ファイルの変更しない場合に、エラーが発生する可能性が有ったのを修正。
 エラー時のファイルの削除処理を調整。

## Ver:8.8 2019/02/11
 IPによるアクセス制限に、期間設定できる様に変更。

## Ver:8.7 2018/12/18
 編集時、サイトURLやメールアドレスなどの値が書き換えられないのを修正。
 SiteURLの置換方法の調整。

## Ver:8.6 2018/11/24
 動画サイトViemoに対応。

## Ver:8.5 2018/10/10
 動画のサムネイル情報を取得する時、xmlオブジェクトのままだと
 判定ミスが起きていたのを修正。

## Ver:8.4 2018/10/05
 PHPのバージョンが7.2の場合に
 記事編集時、colorに関するWarningエラー
 最初のPVカウントや、Goodカウント時にcount()に関するWarningエラーが表示されるのを修正。

## Ver:8.3 2018/04/01
 html.php , entry.phpのセキュリティ調整。
 投稿時や、出力時のエラーの追加。
 アップロードされた画像情報を取得失敗した時のエラー処理を念のために追加。

## Ver:8.2.1 2018/03/16
 rss.phpにて RSSの表示ソート。　$rss_set['sort'] = 1が効かないミス修正。

## Ver:8.2 2017/02/21
 Goodカウント機能を正式追加。 ($c_count -> $good_cnt)
 設定変数$good_set、表示制御 <!-- Good_Counter --> ～ <!-- Good_Counter -->です。
 $count_set['pvc']['sw']によるページビュー数の表示制御用の記述<!-- PV_Counter:* -->を追加。

## Ver:8.1 2017/01/25
 レスに管理者のみが投稿可能モードを追加。
 通知機能の修正。
 データ保存時に整列処理。


## Ver:8.0.1 2016/12/28
 レス引用の記述を行った場合、コメントが表示されないミスを修正。

## Ver:8.0 2016/12/26
 検索の調整。個別版のRSS出力、PickUp出力の標準化。
 IP_CheckerのTorCheckを追加。

## Ver:7.9 2016/12/15
 ページビューのカウンター調整。設定変数の変更。
 画像保存フォルダを記事番号別に変更。

## Ver:7.8 2016/11/25
 検索の追加、投稿の調整。画像認証用の画像呼び出しタグを変更し、[戻る]時にも画像が更新されるように。

## Ver:7.7 2016/09/15
 スクリプト分割、ページ出力の調整。

## Ver:7.6 2015/12/27
 文字コードをUTF8。
 親記事の投稿時に、アップする種別を選ばなかった場合に不正なデータが発生する不具合を修正。

## Ver:7.5 2015/12/13
 画像の種類を拡張子判断からMimeType判別に。

## Ver:7.4 2015/05/18
 ページビューカウントをON時、詳細表示の画像サイズ指定が効かなかったを修正。

## Ver:7.3 2015/05/08
 Youtubeのサムネイル取得APIが変わったため、V3に変更。V3を利用する方法と、基本的なURLに当てはめる方法に。

## Ver:7.2 2015/02/28
 必須マーク

## Ver:7.1 2015/02/19
 Cookieが保存されなくなっていたのを修正。

## Ver:7.0 2015/02/02
 キャリア判別の追加。モバイルの場合、モバイル用テンプレートを読み込む様に。

## Ver:6.9 2015/01/06
ページビューカウント機能を追加。(詳細表示に入った時、該当記事のページビュー数をカウントアップ)

## Ver:6.8 2014/12/20
 コメント中にURLを含む場合に自動でリンクを貼る様に。
 投稿者のサイトURL欄の機能を追加。（設定によって、入力必須指定も可)

## Ver:6.7 2014/11/22
 $res_adswがどちらの値であっても、投稿後のページ表示が最後のレスページだったのを修正。

## Ver:6.6 2014/08/13
 親記事の編集時に、レスが消えてしまう,
 最初からアップ種別のラジオボタンにチェックが入った状態になっている,
 元が動画貼付だった場合にURL入力欄が画像URLになっていた。を修正。

## Ver:6.5 2014/08/07
 レスが無い時のレスの並び替えでPHPエラー発生を修正。親記事の投稿後の経過日数による削除機能を追加。
 レス機能の種別($res_sw)、アップロード機能の種別($upsw)によるテンプレ表示制御が正しくなかったのを修正。
 名無し投稿($no_name)、新レス投稿時の記事並び替え($new_mov)、トリップ機能、容量,親数制限、レスデータ保存、コメント無し投稿($res_req)が正しく動作しなくなっていたのを修正。
 管理パスで編集,削除が出来なかったのを修正、ひまわり動画にて動画によってはサムネイル情報が取得できなかったのを修正。

## Ver:6.4 2014/07/25
 画像認証の追加。 ログにhost名では無く、基本的にはIPアドレスを保存するように変更。

## Ver:6.3 2014/07/24
 gif,pngの透過画像のサムネイル化に対応。（サムネイル化時に背景が黒になるのを修正）

## Ver:6.2 2014/07/14
 ファイルロックの機能を追加。

## Ver:6.1 2014/06/03
 Dailymotion、ひまわり動画、Youtubeの短縮URL形式に対応。

## Ver:6.0 2014/05/26
 テンプレートの置換方法と記述の一部を変更（最適化) ページ番号によるページナビゲートを追加。

## Ver:5.0 2013/7/12
コメント最低文字数=0でレス時にコメント等入力無しでも投稿できたのを修正。
レス時、コメント無しでも添付があれば投稿できる設定の追加。

## Ver:4.9 2013/6/11
トリップを利用していた場合、記事編集時にトリップ値が変わってしまう場合があったのを修正。

## Ver:4.8 2013/6/10
 画像の大きさによっては、サムネイルが生成されず、投稿できないのを修正。
 サムネイルの生成・表示時のサイズ計算を修正。

## Ver:4.7 2013/6/02
 拡張子が大文字の場合に登録不可、レスが有る場合に親の画像差し替えが出来ないのを修正。

## Ver:4.6 2013/5/27
 レス多重投稿のチェックにファイルハッシュ方式を追加、チェック方式の選択設定を追加。 レスの新古 表示並び替えが動作していなかったのを修正。

## Ver:4.5 2013/5/26
 レスの多重投稿時の調整。コメント最低文字数の制限設定を追加。

## Ver:4.4 2013/5/22
 親、レスでアップロード投稿後に指定秒数が経過しないと規制する機能を追加。

## Ver:4.3 2013/5/20
 親を削除した時、レスに動画の貼り付けがあった場合にその動画イメージが削除されないミスを修正。
 親の編集画面で、レスの貼り付け画像が表示されないミスを修正。
 セキュリティでクエリ処理の調整。
 最新レスを先頭に表示するか、末尾に表示するか。ログ上ではなく、表示する時に並び替える様に。

## Ver:4.2 2013/5/15
 画像差し替え時に前画像が削除されず、差し替え出来なかったのを修正。

## Ver:4.1 2012/11/22
 サムネイル表示 元画像の縮小版をサーバに保存して、一覧・詳細　表示に利用する。

## Ver:4.0 2012/07/24
 セキュリティの脆弱性を発見したため、修正いたしました。

## Ver:3.9 2012/07/24
 編集の規制を追加。

## Ver:3.8 2012/07/12
 レス削除時の置換ミスを修正。

## Ver:3.7 2012/07/03
 画像差し替え時のエラーを修正。

## Ver:3.6 2012/07/01
 レス投稿者によるレス削除の機能を追加。

## Ver:3.5 2012/06/28
 一覧表示のナビゲートリンクを修正

## Ver:3.4 2012/06/18
 親、レスの投稿数の制限、動画のイメージの表示方法の追加、New表示の修正。

## Ver:3.3 2012/06/13
 動画のイメージurl取得を変更。

## Ver:3.2 2012/06/11
 レス削除、親記事修正時の問題を修正。

## Ver:3.1 2012/06/10
レス引用のナビゲート機能を追加。

## Ver:3.0 2012/06/09
 記事が更新された場合などにNewを表示、トリップ機能、レスの表示数の調整機能を追加。

## Ver:2.9 2012/05/19
 セキュリティ上の調整

## Ver:2.8 2012/04/12
 編集時の画像サイズ調整、削除完了後に何も表示されないのを修正。

## Ver:2.7 2012/04/09
 デザインのテンプレート化。

## Ver:2.6 2012/04/07
 レス時にアップロードが必須になっていたのを修正し、コメントのみでの投稿を可能に。

## Ver:2.5 2012/04/03
 一覧表示の画像サイズ・表示位置の計算方法を変更。

## Ver:2.4 2012/03/31
 ニコニコ、Youtubeの動画のURLも貼れるように。

## Ver:2.3 2012/03/26
 レスにも画像アップロード可能に。

## Ver:2.2 2011/12/15
 レス機能のON/OFF設定、レスの削除、http://を含むコメントの禁止を追加

## Ver:2.1 2011/02/20
 荒らし対策 - 日本語を含まないコメントの投稿を禁止出来るように。

## Ver:2.0 2010/04/21
 要望により、投稿後の編集、画像差替えを可能に。

## Ver:1.9 2010/04/19
 削除が行えなかったのを修正。
 貼り付け時に拡張子が大文字の場合、アップロードできなかったのを修正。

## Ver:1.8 2010/04/03
 一覧ページの画像表示を調整。
 配布開始。

## Ver:1.7 2010/03/19
 通信セキュリティの強化。

## Ver:1.6 2009/11/14
 一覧ページの全体サイズを計算で算出する様に。

## Ver:1.5 2009/10/09
 強制許可、強制制限をIP,HOSTどちらでも指定可能に修正。

## Ver:1.4 2009/09/21
 画像表示の調整。

## Ver:1.3 2009/09/18
 レス表示の調整。

## Ver:1.2 2009/07/20
 データ書き込み時のエラーを修正

## Ver:1.1 2009/04/14
 アップロード容量制限

## Ver:1.0 2009/04/13 
 一先ず完成。